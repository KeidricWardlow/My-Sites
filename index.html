<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>String Generator</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Oswald&display=swap');

body {
  margin: 0;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(135deg, orange, white, red);
  font-family: 'Oswald';
  overflow: auto;
}

.container {
  background: white;
  padding: 30px;
  border-radius: 12px;
  width: 90%;
  max-width: 350px;
  box-sizing: border-box;
  text-align: center;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

#result-container {
  width: 100%;
  flex: 1;
  min-height: 100px;
  max-height: 200px;
  border: 1px solid black;
  padding: 10px;
  box-sizing: border-box;
  text-align: center;
  overflow-y: auto;
  overflow-x: hidden;
  margin-top: 10px;
  border-radius: 4px;
}

#result {
  font-weight: bold;
  white-space: pre-wrap;
  word-break: break-word;
}

button {
  background: navy;
  color: white;
  border: none;
  padding: 10px;
  margin: 5px;
  font-family: 'Oswald';
  border-radius: 6px;
  cursor: pointer;
  width: 100px;
  font-weight: bold;
}

button:hover {
  background: skyblue;
  color: navy;
}

input, select {
  margin: 10px 0;
  padding: 8px;
  border: 1px solid black;
  border-radius: 4px;
  width: 80%;
  text-align: center;
}

@media (min-width: 768px) {
  .container {
    max-width: 600px;
    padding: 50px;
    border-radius: 16px;
  }

  button {
    width: 120px;
    padding: 12px;
  }

  input, select {
    width: 85%;
    font-size: 1.1em;
  }

  #result-container {
    min-height: 150px;
    max-height: 300px;
  }
</style>
</head>
<body>
  <div class="container">
    <label>String Length:</label>
    <input type="number" id="stringLength" value="10">
    <label>Number of Strings:</label>
    <input type="number" id="numStrings" value="5">
    <label>Character Type:</label>
    <select id="charType">
      <option value="letters">Letters</option>
      <option value="numbers">Numbers</option>
      <option value="alphanumeric">Alphanumeric</option>
      <option value="symbols">Symbols</option>
      <option value="all">All</option>
      <option value="mac">MAC Address</option>
    </select>
    <button onclick="generateStrings()">Generate</button>
    <div id="result-container">
      <div id="result"></div>
    </div>
    <div>
      <button onclick="copyText()">Copy</button>
      <button onclick="printText()">Print</button>
      <button onclick="downloadText()">Download</button>
      <button onclick="clearText()">Clear</button>
      <button onclick="undoAction()">Undo</button>
      <button onclick="redoAction()">Redo</button>
    </div>
  </div>

<script>
let history = [];
let historyIndex = -1;

function saveState() {
  const state = {
    stringLength: document.getElementById('stringLength').value,
    numStrings: document.getElementById('numStrings').value,
    charType: document.getElementById('charType').value,
    result: document.getElementById('result').textContent
  };
  history = history.slice(0, historyIndex + 1);
  history.push(JSON.stringify(state));
  historyIndex++;
  localStorage.setItem('stringGenHistory', JSON.stringify(history));
  localStorage.setItem('stringGenHistoryIndex', historyIndex);
}

function restoreState(index) {
  const state = JSON.parse(history[index]);
  document.getElementById('stringLength').value = state.stringLength;
  document.getElementById('numStrings').value = state.numStrings;
  document.getElementById('charType').value = state.charType;
  document.getElementById('result').textContent = state.result;
}

function generateStrings() {
  const stringLength = parseInt(document.getElementById('stringLength').value);
  const numStrings = parseInt(document.getElementById('numStrings').value);
  const charType = document.getElementById('charType').value;
  const result = document.getElementById('result');
  let characters = '';
  if (charType === 'letters') characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
  else if (charType === 'numbers') characters = '0123456789';
  else if (charType === 'alphanumeric') characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
  else if (charType === 'symbols') characters = '!@#$%^&*()-_=+[]{}|;:,.<>?/`~';
  else if (charType === 'all') characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:,.<>?/`~';
  let output = '';
  if (charType === 'mac') {
    for (let i = 0; i < numStrings; i++) {
      let mac = '';
      for (let j = 0; j < 6; j++) {
        mac += ('0' + Math.floor(Math.random() * 256).toString(16)).slice(-2).toUpperCase();
        if (j < 5) mac += ':';
      }
      output += mac + '\n';
    }
  } else {
    for (let i = 0; i < numStrings; i++) {
      let str = '';
      for (let j = 0; j < stringLength; j++) {
        str += characters.charAt(Math.floor(Math.random() * characters.length));
      }
      output += str + '\n';
    }
  }
  result.textContent = output;
  saveState();
}

async function copyText() {
  const text = document.getElementById('result').textContent;
  try {
    await navigator.clipboard.writeText(text);
  } catch (err) {
    const range = document.createRange();
    const selection = window.getSelection();
    const resultDiv = document.getElementById('result');
    range.selectNodeContents(resultDiv);
    selection.removeAllRanges();
    selection.addRange(range);
    document.execCommand('copy');
    selection.removeAllRanges();
  }
}

function printText() {
  const text = document.getElementById('result').textContent;
  const printWindow = window.open('', '_blank');
  printWindow.document.write(`
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <title>Generated Strings</title>
      <style>
        body { font-family: monospace; margin: 20px; }
        pre { white-space: pre-wrap; word-break: break-word; }
      </style>
    </head>
    <body>
      <pre>${text}</pre>
    </body>
    </html>
  `);
  printWindow.document.close();
  printWindow.print();
}

function downloadText() {
  const blob = new Blob([document.getElementById('result').textContent], { type: 'text/plain' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = 'generated_strings.txt';
  link.click();
}

function clearText() {
  document.getElementById('result').textContent = '';
  saveState();
}

function undoAction() {
  if (historyIndex > 0) {
    historyIndex--;
    restoreState(historyIndex);
    localStorage.setItem('stringGenHistoryIndex', historyIndex);
  }
}

function redoAction() {
  if (historyIndex < history.length - 1) {
    historyIndex++;
    restoreState(historyIndex);
    localStorage.setItem('stringGenHistoryIndex', historyIndex);
  }
}

window.onload = function() {
  const storedHistory = localStorage.getItem('stringGenHistory');
  const storedIndex = localStorage.getItem('stringGenHistoryIndex');
  if (storedHistory) {
    history = JSON.parse(storedHistory);
    historyIndex = parseInt(storedIndex, 10);
    if (history.length && historyIndex >= 0) restoreState(historyIndex);
  } else {
    saveState();
  }
};
</script>
</body>
</html>
